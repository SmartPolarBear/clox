fun closure()
{
    var i=0;
    fun count(){
        i=i+1;
        if(i!=3.0) {
            print i;
        }
        else {
            print "fuck";
        }
    }

    return count;
}

// FIXME upvalue is add to wrong scope
var c=closure();
c();

c();
c();
c();
c();

/*
fun closure(){
    fun p(i:integer){
        print i;
    }

    fun p(){
        print "fuck";
    }
    return p;
}


// TODO: argument check
var c=closure();
c();

// FIXME: these should be wrong
c(1);
c("a");
*/

